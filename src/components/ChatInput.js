import { Button } from "@material-ui/core"
import { useRef, useState } from "react";
import styled from "styled-components"
import { db } from '../firebase'
import firebase from "firebase"

const ChatInput = ({ channelName, channelId }) => {
    const [input, setInput] = useState("");


    const sendMessage = e => {
        e.preventDefault();

        if (!channelId) {
            return false;
        }
        db.collection("rooms").doc(channelId).collection("messages").add({
            message: input,
            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
            user: "Dhwaj Sharma",
            userImage: "data:image/jpeg;base64,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"
        })

        setInput("");
    }

    return (
        <ChatInputContainer>
            <form>
                <input
                    value={input}
                    onChange={e => setInput(e.target.value)}
                    placeholder={`Message #${channelName}`}
                />
                <Button hidden type="submit" onClick={sendMessage}>
                    SEND
                </Button>
            </form>
        </ChatInputContainer>
    )
}

export default ChatInput

const ChatInputContainer = styled.div`
    border-radius: 20px;
    > form {
        position: relative;
        display: flex;
        justify-content: center;
    }

    > form > input {
        position: fixed;
        bottom: 30px;
        width: 60%;
        border: 1px solid gray;
        border-radius: 3px;
        padding: 20px;
        outline: none;
        background-color: #3D3D3D;
        color: white;
    }

    > form > button{
        display: none !important;
    }

`